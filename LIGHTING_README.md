# Реализация освещения и шейдинга Гуро

## Что было добавлено

### 1. Источник света (Light)
- Добавлена структура `Light` в `scene.h`:
  - `position` - позиция источника света в мировых координатах
  - `color` - цвет источника света
  - `intensity` - интенсивность освещения (0.0 - 2.0)

### 2. Модель освещения Ламберта
- Реализована функция `calculate_lambert_lighting()` в `scene.c`
- Вычисляет диффузное отражение на основе:
  - Позиции точки в мировых координатах
  - Нормали к поверхности в мировых координатах
  - Базового цвета объекта
  - Параметров источника света
- Включает ambient освещение (минимальный уровень 0.2) для лучшей видимости объектов

### 3. Шейдинг Гуро
- Реализована функция `draw_triangle_gouraud()` в `scene.c`
- Вычисляет цвет для каждой вершины треугольника по модели Ламберта
- Интерполирует цвета между вершинами с использованием барицентрических координат
- Создаёт плавные переходы освещения на поверхности объекта

### 4. Визуализация источника света
- Функция `draw_light_source()` отрисовывает источник света как:
  - Яркий круг в позиции источника
  - Крестик для лучшей видимости
- Источник света автоматически отрисовывается в каждом кадре

### 5. UI для управления источником света
- Добавлена кнопка "Источник света" в главное меню
- Режим `MODE_LIGHT` с параметрами:
  - **X, Y, Z** - слайдеры для изменения позиции источника света (диапазон -20 до 20)
  - **Интенсивность** - слайдер для управления яркостью света (0.0 - 2.0)

## Как использовать

1. Запустите программу
2. Нажмите кнопку **"Источник света"** в меню
3. Используйте слайдеры для изменения:
   - Положения источника света по осям X, Y, Z
   - Интенсивности освещения
4. Наблюдайте за изменением освещения на объектах в реальном времени
5. Источник света визуализируется как жёлтый круг с крестиком

## Технические детали

- **Вычисление нормалей**: используются нормали вершин из структуры `Vertex`
- **Трансформация нормалей**: нормали корректно трансформируются вместе с объектом
- **Backface culling**: грани, направленные от камеры, не отрисовываются
- **Z-buffer**: корректная обработка глубины для всех пикселей
- **Барицентрические координаты**: используются для интерполяции цветов внутри треугольников

## Особенности реализации

1. Освещение работает только для нетекстурированных объектов
2. Ambient освещение 0.2 обеспечивает минимальную видимость даже в тени
3. Диффузный коэффициент ограничен диапазоном [0, 1]
4. Цвет вершины вычисляется один раз перед отрисовкой треугольника
5. Интерполяция выполняется в цветовом пространстве RGB

## Начальные параметры

- **Позиция света**: (5.0, 5.0, 5.0)
- **Цвет света**: WHITE
- **Интенсивность**: 1.0

